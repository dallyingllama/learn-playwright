# Test info

- Name: üîó Links Page >> üîÅ Clicking dynamic Home link opens homepage in new tab
- Location: /home/runner/work/learn-playwright/learn-playwright/tests/links.spec.ts:24:7

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveText(expected)

Locator: locator('h1')
Expected string: "Links"
Received string: "502 Bad Gateway"
Call log:
  - expect.toHaveText with timeout 5000ms
  - waiting for locator('h1')
    9 √ó locator resolved to <h1>502 Bad Gateway</h1>
      - unexpected value "502 Bad Gateway"

    at LinksPage.waitForPageReady (/home/runner/work/learn-playwright/learn-playwright/pageObjects/LinksPage.ts:32:43)
    at AsyncFunction.viaDirectLink (/home/runner/work/learn-playwright/learn-playwright/pageObjects/LinksPage.ts:26:20)
    at /home/runner/work/learn-playwright/learn-playwright/tests/links.spec.ts:10:7
    at navigateToLinksPage (/home/runner/work/learn-playwright/learn-playwright/tests/links.spec.ts:8:12)
    at /home/runner/work/learn-playwright/learn-playwright/tests/links.spec.ts:25:23
```

# Page snapshot

```yaml
- heading "502 Bad Gateway" [level=1]
- separator
- text: nginx/1.17.10 (Ubuntu)
```

# Test source

```ts
   1 | // pageObjects/LinksPage.ts
   2 | import { Page, Locator, expect } from '@playwright/test';
   3 | import { BasePage } from './BasePage';
   4 | import { createGotoWithVariants } from '../utils/gotoHelper';
   5 | import { NavigablePage } from './interfaces/NavigablePage';
   6 |
   7 | const config = {
   8 |   menu: 'Elements',
   9 |   menuItem: 'Links',
  10 |   url: 'links',
  11 |   header: 'Links',
  12 | };
  13 |
  14 | export class LinksPage extends BasePage implements NavigablePage {
  15 |   readonly goto;
  16 |   constructor(page: Page) {
  17 |     super(page);
  18 |     this.goto = createGotoWithVariants(
  19 |       async () => {
  20 |         await this.openSidebarFromHome(config.menu);
  21 |         await this.sidebarMenu.navigateTo(config.menuItem);
  22 |         await this.waitForPageReady();
  23 |       },
  24 |       async () => {
  25 |         await this.page.goto(config.url);
  26 |         await this.waitForPageReady();
  27 |       }
  28 |     );
  29 |   }
  30 |
  31 |   override async waitForPageReady(): Promise<void> {
> 32 |     await expect(this.page.locator('h1')).toHaveText(config.header);
     |                                           ^ Error: Timed out 5000ms waiting for expect(locator).toHaveText(expected)
  33 |   }
  34 |
  35 |   async assertOnPage(): Promise<void> {
  36 |     await expect(this.page).toHaveURL(config.url);
  37 |     await expect(this.page.locator('h1')).toHaveText(config.header);
  38 |   }
  39 |
  40 |   // Locators
  41 |
  42 |   private readonly simpleLink = this.page.getByRole('link', { name: 'Home', exact: true });
  43 |   private readonly dynamicLink = this.page.locator('#dynamicLink');
  44 |   private readonly responseOutput = this.page.locator('#linkResponse');
  45 |
  46 |   private createdLink = this.page.getByRole('link', { name: 'Created' });
  47 |   private noContentLink = this.page.getByRole('link', { name: 'No Content' });
  48 |   private movedLink = this.page.getByRole('link', { name: 'Moved' });
  49 |   private linkResponse = this.page.locator('#linkResponse');
  50 |
  51 |   // Actions
  52 |   async clickSimpleHomeLink() {
  53 |     const [newPage] = await Promise.all([
  54 |       this.page.context().waitForEvent('page'),
  55 |       this.simpleLink.click()
  56 |     ]);
  57 |     return newPage.url(); // Capture the URL of the new tab
  58 |   }
  59 |
  60 |   async clickDynamicHomeLink() {
  61 |     const [newPage] = await Promise.all([
  62 |       this.page.context().waitForEvent('page'),
  63 |       this.dynamicLink.click()
  64 |     ]);
  65 |     return newPage.url(); // Capture the URL of the new tab
  66 |   }
  67 |
  68 |   async clickApiLink(linkType: 'created' | 'noContent' | 'moved') {
  69 |     const linkMap = {
  70 |       created: this.createdLink,
  71 |       noContent: this.noContentLink,
  72 |       moved: this.movedLink,
  73 |     };
  74 |     await linkMap[linkType].click();
  75 |   }
  76 |
  77 |   async getLinkResponseText(): Promise<string> {
  78 |     return (await this.linkResponse.textContent())?.trim() ?? '';
  79 |   }
  80 |
  81 | // Methods to click links and validate response
  82 | async clickLinkAndWaitForResponse(linkId: string): Promise<void> {
  83 |   const link = this.page.locator(`#${linkId}`);
  84 |   await link.click();
  85 |   await expect(this.responseOutput).toBeVisible();
  86 | }
  87 |
  88 | async assertResponseTextContains(text: string): Promise<void> {
  89 |   await expect(this.responseOutput).toContainText(text);
  90 | }  
  91 | }
  92 |
```